/*!
 * PSPDFKit for Web 2020.2.4 (https://pspdfkit.com/web)
 * 
 * Copyright (c) 2016-2019 PSPDFKit GmbH. All rights reserved.
 * 
 * THIS SOURCE CODE AND ANY ACCOMPANYING DOCUMENTATION ARE PROTECTED BY INTERNATIONAL COPYRIGHT LAW
 * AND MAY NOT BE RESOLD OR REDISTRIBUTED. USAGE IS BOUND TO THE PSPDFKIT LICENSE AGREEMENT.
 * UNAUTHORIZED REPRODUCTION OR DISTRIBUTION IS SUBJECT TO CIVIL AND CRIMINAL PENALTIES.
 * This notice may not be removed from this file.
 * 
 * PSPDFKit uses several open source third-party components: https://pspdfkit.com/acknowledgements/web/
 */
(window.__PSPDFKitChunk=window.__PSPDFKitChunk||[]).push([[64],{779:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(29),l=a.n(o),i=a(15),c=a.n(i),s=a(33),d=a.n(s),u=a(16),p=a.n(u),g=a(21),m=a.n(g),f=a(26),b=a.n(f),h=a(410),v=a(14),y=a(3),P=a(189),w=a(35),I=a(234),N=a(702),x=a(87),k=a(5),E=a(2),S=a(34),O=a(0),C=a(13),D=a.n(C),j=a(17),M=a(411),A=a(51),z=a(103),B=a(175),R=new E.N({width:v.b,height:v.a}),T=O.createElement(z.a,null),F=function(e){var t=e.styles,r=e.formatMessage;return O.createElement("div",{style:{width:e.width,height:e.height},className:t.importedDocument},O.createElement("div",{className:t.importedDocumentIconCircle},O.createElement(A.a,{src:a(435)})),O.createElement("span",{className:t.importedDocumentInfo},r(H.documentMergedHere)))},L=function(e,t,a,r){var n=e.map(function(e){return{type:"page",page:e,rotation:0,label:e.pageLabel}}),o=function(e){var t=e.dupeOf||e.label,a=0,r=!0,o=!1,l=void 0;try{for(var i,c=n[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var s=i.value;null!=s.dupeOf&&s.dupeOf===t&&null!=s.dupeNumber&&s.dupeNumber>a&&(a=s.dupeNumber)}}catch(e){o=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw l}}return a+1},l=!0,i=!1,c=void 0;try{for(var s,d=t[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var u=s.value;switch(u.type){case"addPage":var g=void 0;null!=u.afterPageIndex?g=u.afterPageIndex+1:(Object(y.h)(null!=u.beforePageIndex),g=u.beforePageIndex),n=n.insert(g,{type:"newPage",label:a(H.newPage),rotation:0,size:new E.N({width:u.pageWidth,height:u.pageHeight})});break;case"removePages":var m=u.pageIndexes.map(function(e){return n.get(e)}),f=!0,b=!1,h=void 0;try{for(var v,P=m[Symbol.iterator]();!(f=(v=P.next()).done);f=!0){var w=v.value;Object(y.h)(null!=w);var I=n.indexOf(w);n=n.delete(I)}}catch(e){b=!0,h=e}finally{try{f||null==P.return||P.return()}finally{if(b)throw h}}break;case"rotatePages":var N=!0,x=!1,k=void 0;try{for(var S,O=u.pageIndexes[Symbol.iterator]();!(N=(S=O.next()).done);N=!0){var C=S.value,D=n.get(C);Object(y.h)(null!=D);var j=void 0,M=void 0;Object(y.h)("page"===D.type||"newPage"===D.type);var A=D.rotation;if(M=90===u.rotateBy?270===A?0:A+u.rotateBy:90===A?0:180===A?90:270===A?180:A+u.rotateBy,Object(y.h)(0===M||90===M||180===M||270===M),"page"===D.type)j=p()({},D,{rotation:M});else{if("newPage"!=D.type)throw new y.a("Rotation is not allowed on imported documents");j=p()({},D,{rotation:M})}n=n.set(C,j)}}catch(e){x=!0,k=e}finally{try{N||null==O.return||O.return()}finally{if(x)throw k}}break;case"duplicatePages":var z=u.pageIndexes.map(function(e){return n.get(e)}),B=!0,R=!1,T=void 0;try{for(var F,L=z[Symbol.iterator]();!(B=(F=L.next()).done);B=!0){var _=F.value;Object(y.h)(null!=_),Object(y.h)("page"===_.type);var V=o(_),W=_.dupeOf||_.label,K=n.indexOf(_);n=n.insert(K+1,Object.assign({},_,{label:"".concat(W," (").concat(V,")"),dupeOf:W,dupeNumber:V}))}}catch(e){R=!0,T=e}finally{try{B||null==L.return||L.return()}finally{if(R)throw T}}break;case"movePages":var G=u.pageIndexes[0],Y=void 0;null!=u.beforePageIndex?Y=u.beforePageIndex:(Object(y.h)(null!=u.afterPageIndex),Y=u.afterPageIndex+1);var q=n.get(G);n=n.delete(G),Object(y.h)(null!=q),n=n.insert(Y,q);break;case"importDocument":var J=void 0;null!=u.beforePageIndex?J=u.beforePageIndex:(Object(y.h)(null!=u.afterPageIndex),J=u.afterPageIndex+1);var U=void 0;if("string"==typeof u.document){var X=u.document;Object(y.h)(r.has(X)),U=r.get(X,"Imported Document")}else Object(y.h)("string"==typeof u.document.name),U=u.document.name;n=n.insert(J,{type:"importedDocument",label:U});break;case"keepPages":case"applyInstantJson":case"applyXfdf":throw Error("Unknown document operation");default:Object(y.b)(u.type)}}}catch(e){i=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(i)throw c}}return n};t.default=Object(I.c)(function(e){var t,r,o=e.onCancel,i=e.pages,s=e.dispatch,u=e.backend,g=e.frameWindow,f=e.intl.formatMessage,I=e.CSS_HACK.styles,N=O.useState(Object(k.b)()),C=b()(N,2),z=C[0],_=(C[1],O.useState(Object(k.a)())),V=b()(_,2),W=V[0],K=V[1],G=O.useState(0),Y=b()(G,2),q=Y[0],J=Y[1],U=W.slice(0,W.size-q),X=L(e.pages,U,f,z),Q=O.useState(Object(k.g)()),Z=b()(Q,2),$=Z[0],ee=Z[1],te=O.useState(!1),ae=b()(te,2),re=ae[0],ne=ae[1],oe=O.useState(!1),le=b()(oe,2),ie=le[0],ce=le[1],se=O.useCallback(function(e){K(U.push(e)),J(0)},[U]),de=O.useRef(!0);O.useLayoutEffect(function(){return function(){de.current&&(de.current=!1)}},[]);var ue=O.useCallback(function(){var e=i.get(0),t=e?e.pageSize:R,a={type:"addPage",backgroundColor:E.j.WHITE,pageWidth:t.width,pageHeight:t.height,rotateBy:0};1===$.size?a.afterPageIndex=$.first():a.beforePageIndex=0,se(a),ee($.clear())},[i,$,se]),pe=O.useCallback(function(){se({type:"removePages",pageIndexes:$.toArray()}),ee($.clear())},[se,$]),ge=O.useCallback(function(){se({type:"duplicatePages",pageIndexes:$.toArray()}),ee($.clear())},[se,$]),me=O.useCallback(function(){se({type:"rotatePages",pageIndexes:$.toArray(),rotateBy:270})},[se,$]),fe=O.useCallback(function(){se({type:"rotatePages",pageIndexes:$.toArray(),rotateBy:90})},[se,$]),be=O.useCallback(function(){var e=U,t=!0,a=!1,r=void 0;try{for(var n,o=$.sort()[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var l=n.value;e=e.push({type:"movePages",pageIndexes:[l],beforePageIndex:l-1})}}catch(e){a=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}K(e),J(0),ee(Object(k.g)($.toArray().map(function(e){return e-1})))},[$,U]),he=O.useCallback(function(){var e=U,t=!0,a=!1,r=void 0;try{for(var n,o=$.sort().reverse()[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var l=n.value;e=e.push({type:"movePages",pageIndexes:[l],afterPageIndex:l})}}catch(e){a=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}K(e),J(0),ee(Object(k.g)($.toArray().map(function(e){return e+1})))},[$,U]),ve=O.useCallback(function(){ee($.clear()),J(q+1)},[$,q]),ye=O.useCallback(function(){ee($.clear()),J(q-1)},[$,q]),Pe=O.useCallback(m()(c.a.mark(function e(){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},1===$.size?t.afterPageIndex=$.first():t.beforePageIndex=0,(a=document.createElement("input")).type="file",a.accept="application/pdf",a.onclick=function(e){e.target.value=""},a.onchange=function(e){if(0!==e.target.files.length){var a=U,r=!0,n=!1,o=void 0;try{for(var l,i=function(){var e=l.value;return"string"!=typeof e.name||0===e.name.length?{v:void 0}:"application/pdf"!==e.type?(Object(y.l)("The uploaded file must be a PDF."),{v:void 0}):-1!==X.findIndex(function(t){return"importedDocument"===t.type&&t.label===e.name})?{v:void 0}:void(a=a.push(p()({type:"importDocument",treatImportedDocumentAsOnePage:!0,document:e},t)))},c=e.target.files[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=i();if("object"===d()(s))return s.v}}catch(e){n=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw o}}K(a),J(0),ee($.clear())}},a.click();case 8:case"end":return e.stop()}},e)})),[$,z,se,U,X]),we=O.useCallback(function(){ee(X.keySeq().toSet())},[X,ee]),Ie=O.useCallback(function(){ee($.clear())},[$,ee]),Ne=O.useCallback(function(e){$.has(e)?ee($.delete(e)):ee($.add(e))},[$,ee]),xe=O.useCallback(function(){o()},[o]),ke=O.useCallback(function(){ne(!0),s(Object(P.a)(U.toArray(),function(){de.current&&ne(!1)},function(e){throw de.current&&ne(!1),e}))},[s,U]),Ee=O.useCallback(m()(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!0),e.prev=1,e.next=4,u.exportPDFWithOperations(U.toArray().map(S.q));case 4:t=e.sent,Object(x.c)(t,g),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:return e.prev=11,de.current&&ne(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])})),[u,U,g]),Se=$.size>0&&void 0===$.find(function(e){var t=X.get(e);return Object(y.h)(null!=t),"page"!==t.type&&"newPage"!==t.type}),Oe=$.size>0&&void 0===$.find(function(e){var t=X.get(e);return Object(y.h)(null!=t),"page"!==t.type}),Ce=!$.isEmpty()&&!$.includes(0),De=!$.isEmpty()&&!$.includes(X.size-1),je=q<W.size,Me=q>0,Ae=I.toolbar.toolbarButton,ze=O.useMemo(function(){return[{type:"editor/add",onPress:ue,className:Ae,disabled:re,children:f(H.newPage)},{type:"editor/remove",onPress:pe,className:Ae,disabled:0===$.size||$.size===X.size||re,children:f(H.removePage)},{type:"editor/duplicate",onPress:ge,className:Ae,children:f(H.duplicatePage),disabled:!Oe||re},{type:"editor/rotateLeft",onPress:me,className:Ae,children:f(H.rotatePageLeft),disabled:!Se||re},{type:"editor/rotateRight",onPress:fe,className:Ae,children:f(H.rotatePageRight),disabled:!Se||re},{type:"editor/moveLeft",onPress:be,className:I.toolbar.toolbarButton,children:f(H.moveBefore),disabled:!Ce||re},{type:"editor/moveRight",onPress:he,className:I.toolbar.toolbarButton,children:f(H.moveAfter),disabled:!De||re},{type:"editor/importDocument",onPress:Pe,className:Ae,children:f(H.mergeDocument),disabled:re},{type:"spacer"},{type:"editor/undo",onPress:ve,className:I.toolbar.toolbarButton,children:f(j.a.undo),disabled:!je||re},{type:"editor/redo",onPress:ye,className:I.toolbar.toolbarButton,children:f(j.a.redo),disabled:!Me||re},{type:"editor/selectAll",onPress:we,className:Ae,children:f(H.selectAll),disabled:$.size===X.size||re},{type:"editor/selectNone",onPress:Ie,className:Ae,children:f(H.selectNone),disabled:$.isEmpty()||re}]},[ue,Ae,re,f,pe,$,X.size,ge,Oe,me,Se,fe,be,I.toolbar.toolbarButton,Ce,he,De,Pe,ve,je,ye,Me,we,Ie]),Be=O.useState(Number.POSITIVE_INFINITY),Re=b()(Be,2),Te=Re[0],Fe=Re[1],Le=O.useMemo(function(){return Te===Number.POSITIVE_INFINITY?[ze,[]]:[ze.slice(0,Te),ze.slice(Te).filter(function(e){return"spacer"!==e.type}).map(function(e){return{item:p()({},e,{dropdownGroup:"documentEditor"})}})]},[ze,Te]),He=b()(Le,2),_e=He[0],Ve=He[1],We=O.useState(new E.N),Ke=b()(We,2),Ge=Ke[0],Ye=Ke[1],qe=O.useCallback(function(e){Fe(Number.POSITIVE_INFINITY),Ye(new E.N({width:e.width,height:e.height}))},[Ye,Fe]),Je=O.useRef(null);O.useLayoutEffect(function(){var e=Je.current;if(e&&0!==Ge.width){var t=e.children;if(t.length!==Te){var a=e.ownerDocument.defaultView.getComputedStyle(e),r=44+(parseInt(a.getPropertyValue("padding-left"))||0)+(parseInt(a.getPropertyValue("padding-right"))||0),n=[].findIndex.call(t,function(e,t){return"spacer"!==ze[t].type&&(r+=e.clientWidth)>Ge.width});Fe(-1===n?Number.POSITIVE_INFINITY:n),e.ownerDocument.defaultView.innerWidth>=v.e?ce(!0):ce(!1)}}},[Ge,Te,Fe,ze]);var Ue=e.CSS_HACK.components,Xe=Ue.ToolbarButtonComponent,Qe=Ue.ToolbarDropdownGroupComponent;return O.createElement("div",{className:D()(I.docEditor,"PSPDFKit-DocumentEditor")},O.createElement("div",{className:I.toolbar.root,style:{flex:0}},O.createElement("div",{ref:Je,className:I.toolbarContainer},_e.map(function(e,t){return"spacer"===e.type?O.createElement("div",{style:{flex:1},key:"spacer-".concat(t)}):O.createElement(Xe,l()({},e,{key:e.type}))})),Ve.length>0&&O.createElement(O.Fragment,null,O.createElement("div",{style:{flex:1},key:"spacer-responsive"}),O.createElement(Qe,{icon:{type:"more",size:{width:20,height:20}},items:Ve,discreteDropdown:!0,caretDirection:"down",ItemComponent:function(e){var t=e.item;return e.isSelectedItem?null:O.createElement(Xe,l()({},t.item,{key:t.type,className:D()(t.item.className,I.toolbar.dropdownButton)}))}}))),O.createElement("div",{className:I.pagesView},O.createElement(B.a,{onResize:qe}),O.createElement("div",{className:D()((t={},n()(t,I.pagesGrid,!0),n()(t,I.pagesGridLargeThumbnails,ie),t))},O.createElement(M.a,{totalItems:X.size,width:Ge.width,height:Ge.height,itemScale:e.scale,renderItemCallback:function(e,t,a){var r,n=X.get(e);switch(Object(y.h)(null!=n),n.type){case"page":r=O.createElement(h.b,{key:"page-".concat(n.label),page:n.page,size:t,maxSize:a,rotation:n.rotation});break;case"newPage":var o=Object(h.a)(n.size,n.rotation,t,a),l=o.rotatedWidth,i=o.rotatedHeight;r=O.createElement("div",{key:"newPage-".concat(n.label),style:{width:l,height:i}});break;case"importedDocument":var c=Object(h.a)(R,0,t,a),s=c.containerWidth,d=c.containerHeight;r=O.createElement(F,{width:s,height:d,key:"importedDoc-".concat(n.label),styles:I,formatMessage:f});break;default:Object(y.b)(n.type)}return{item:r,label:n.label}},onItemPress:Ne,selectedItemIndexes:$,cssPrefix:"PSPDFKit-DocumentEditor"}))),O.createElement("div",{className:I.bottomBar},O.createElement(w.b,{onClick:xe},f(j.a.cancel)),O.createElement("div",{className:D()((r={},n()(r,I.pagesSelectedIndicator,!0),n()(r,I.pagesSelectedIndicatorShown,$.size>0),r))},O.createElement("div",{className:I.pagesSelectedIcon},O.createElement(A.a,{src:a(436)})),f(H.pagesSelected,{arg0:$.size})),O.createElement("div",{className:I.spacer}),re&&T,O.createElement(w.b,{disabled:re,onClick:Ee},f(j.a.saveAs)),O.createElement(w.b,{primary:!0,disabled:U.isEmpty()||re,onClick:ke},f(j.a.save))))});var H=Object(N.a)({newPage:{id:"newPage",defaultMessage:"New Page",description:"Add new page"},removePage:{id:"removePage",defaultMessage:"Remove Page",description:"Remove page"},duplicatePage:{id:"duplicatePage",defaultMessage:"Duplicate Page",description:"Duplicate page"},rotatePageLeft:{id:"rotatePageLeft",defaultMessage:"Rotate Page Left",description:"Rotate Page Left"},rotatePageRight:{id:"rotatePageRight",defaultMessage:"Rotate Page Right",description:"Rotate Page Right"},mergeDocument:{id:"mergeDocument",defaultMessage:"Merge Document",description:"Merge Document"},selectAll:{id:"selectAll",defaultMessage:"Select All",description:"Select All Pages"},selectNone:{id:"selectNone",defaultMessage:"Select None",description:"Deselect All Pages"},moveBefore:{id:"moveBefore",defaultMessage:"Move Before",description:"Move page before previous one"},moveAfter:{id:"moveAfter",defaultMessage:"Move After",description:"Move page after next one"},documentMergedHere:{id:"documentMergedHere",defaultMessage:"Document will be merged here",description:"Placeholder for the imported document"},pagesSelected:{id:"pagesSelected",defaultMessage:"{arg0, plural,\n      =0 {{arg0} Pages}\n      one {{arg0} Page}\n      two {{arg0} Pages}\n      other {{arg0} Pages}\n    }",description:"Number of pages selected."}})}}]);